{"version":3,"sources":["webpack:///./src/pages/Detail/index.tsx","webpack:///./src/pages/Detail/index.scss?e1ff","webpack:///./src/pages/Detail/index.scss"],"names":["style","cx","bind","axiosGetCurrentTripApi","resetCurrentTripInfo","getCurrentBudgetInfo","resetCurrentBudgetInfo","resetCurrentBudgetList","match","history","userId","state","isLoaded","isTripLoaded","isFailed","currentTripInfo","currentBudgetInfo","dispatch","id","setId","params","activeTab","setActiveTab","PROFILE","name","isOpenLayer","setIsOpenLayer","isOpenSpendingLayer","setIsOpenSpendingLayer","isOpenIncomeLayer","setIsOpenIncomeLayer","showSelect","setShowSelect","setIsLoaded","activeDateFilter","setDateActiveFilter","ALL","updateTab","tabName","handleClickIncome","handleClickExpenseItem","type","SPENDING","INCOME","className","onClickSpending","onClickIncome","onUpdateTab","onSetShowSelect","CURRENCY","onClickExpenseItem","EXPENSE","onSetDateActiveFilter","REPORT","title","text","layerType","TEXT","openHandler","handler","onSetIsOpenSpendingLayer","onSetIsOpenIncomeLayer","content","module","i","options","transform","locals","exports","push"],"mappings":"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","file":"3.bundle.98082bce6afaf8fada87.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { hot } from 'react-hot-loader/root';\n\nimport {\n  Tab,\n  Profile,\n  Currency,\n  Expense,\n  Layer,\n  SpendingLayer,\n  IncomeLayer,\n  Select\n} from '@components/index.ts';\nimport { LAYER_TYPE } from '@components/Layer';\nimport { TAB_INFO } from '@components/Tab';\nimport classNames from 'classnames/bind';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { USER } from '@modules/users';\nimport { TRIP, tripActions } from '@modules/trips';\nimport { BUDGET, budgetActions } from '@modules/budget';\nimport { NEW_ROUTER_ID } from '@pages/Home';\n\nimport { EXPENSE_DATE_FILTER, EXPENSE_TYPE } from '@constants/type';\n\nconst style = require('./index.scss');\nconst cx = classNames.bind(style);\n\nconst {\n  axiosGetCurrentTripApi,\n  resetCurrentTripInfo,\n} = tripActions;\nconst {\n  getCurrentBudgetInfo,\n  resetCurrentBudgetInfo,\n  resetCurrentBudgetList\n} = budgetActions;\n\ninterface IOwnProps {\n  match: any;\n  history: History;\n}\n\nconst Detail: React.FC<IOwnProps> = ({ match, history }) => {\n  const { userId } = useSelector((state: any) => state[USER]);\n  const {\n    isLoaded: isTripLoaded,\n    isFailed,\n    currentTripInfo,\n  } = useSelector((state: any) => state[TRIP]);\n  const {\n    currentBudgetInfo,\n  } = useSelector((state: any) => state[BUDGET]);\n  const dispatch = useDispatch();\n\n  const [id, setId] = useState(match.params.id);\n  const [activeTab, setActiveTab] = useState(TAB_INFO.PROFILE.name);\n  const [isOpenLayer, setIsOpenLayer] = useState(false);\n  const [isOpenSpendingLayer, setIsOpenSpendingLayer] = useState(false);\n  const [isOpenIncomeLayer, setIsOpenIncomeLayer] = useState(false);\n  const [showSelect, setShowSelect] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [activeDateFilter, setDateActiveFilter] = useState(EXPENSE_DATE_FILTER.ALL);\n\n  const updateTab = (tabName: string) => {\n    setActiveTab(tabName);\n  };\n\n  const handleClickReportTab = () => {\n    setActiveTab(TAB_INFO.PROFILE.name);\n  };\n\n  const handleClickSpending = () => {\n    setIsOpenSpendingLayer(true);\n    dispatch(resetCurrentBudgetInfo());\n  };\n\n  const handleClickIncome = () => {\n    setIsOpenIncomeLayer(true);\n    dispatch(resetCurrentBudgetInfo());\n  };\n\n  const handleClickExpenseItem = ({\n    id,\n    type\n  }: {\n    id: string,\n    type: string\n  }) => {\n    dispatch(getCurrentBudgetInfo({ id }));\n\n    if (type === EXPENSE_TYPE.SPENDING) setIsOpenSpendingLayer(true);\n    if (type === EXPENSE_TYPE.INCOME) setIsOpenIncomeLayer(true);\n  };\n\n  useEffect(() => () => {\n    dispatch(resetCurrentTripInfo());\n    dispatch(resetCurrentBudgetList());\n  }, []);\n\n  useEffect(() => {\n    if (id !== NEW_ROUTER_ID) {\n      setShowSelect(false);\n      if (!isTripLoaded) {\n        dispatch(axiosGetCurrentTripApi({ userId, id }));\n      } else {\n        setIsLoaded(true);\n      }\n    } else {\n      setShowSelect(true);\n      setIsLoaded(true);\n    }\n  }, [isTripLoaded]);\n\n  useEffect(() => {\n    setId(match.params.id);\n  }, [match.params.id]);\n\n  useEffect(() => {\n    if (activeTab === TAB_INFO.PROFILE.name) setIsOpenLayer(true);\n  }, [activeTab]);\n\n  return (!isLoaded ? (\n    isFailed ? (<p>실패하였습니다</p>) : (<p>로딩중...</p>)\n  ) : (\n    <div className={cx('detail')}>\n      <Tab\n        match={match}\n        updateTab={updateTab}\n        activeTab={activeTab}\n        onClickSpending={handleClickSpending}\n        onClickIncome={handleClickIncome}\n      />\n      {activeTab === TAB_INFO.PROFILE.name && (\n        <Profile\n          currentTripInfo={currentTripInfo}\n          id={id}\n          history={history}\n          onUpdateTab={updateTab}\n          userId={userId}\n          onSetShowSelect={setShowSelect}\n        />\n      )}\n      {activeTab === TAB_INFO.CURRENCY.name && (\n        <Currency\n          currentTripInfo={currentTripInfo}\n          onClickIncome={handleClickIncome}\n          onClickExpenseItem={handleClickExpenseItem}\n        />\n      )}\n      {activeTab === TAB_INFO.EXPENSE.name && (\n        <Expense\n          activeDateFilter={activeDateFilter}\n          onSetDateActiveFilter={setDateActiveFilter}\n          currentTripInfo={currentTripInfo}\n          onClickExpenseItem={handleClickExpenseItem}\n        />\n      )}\n      {activeTab === TAB_INFO.REPORT.name && (\n          <>\n            {isOpenLayer && (\n              <Layer\n                title={'PRO UPGRADE'}\n                text={'PRO로 업그레이드 해보세요. 여행 경비 리포트를 볼 수 있고, 지출 내역을 PDF, CSV 파일로 내보내기 할 수 있습니다.'}\n                layerType={LAYER_TYPE.TEXT}\n                openHandler={setIsOpenLayer}\n                handler={handleClickReportTab}\n              />\n            )}\n          </>\n      )}\n      {showSelect && (\n        <Select\n          onSetShowSelect={setShowSelect}\n        />\n      )}\n      {isOpenSpendingLayer && (\n        <SpendingLayer\n          userId={userId}\n          activeDateFilter={activeDateFilter}\n          currentTripInfo={currentTripInfo}\n          onSetIsOpenSpendingLayer={setIsOpenSpendingLayer}\n          currentBudgetInfo={currentBudgetInfo}\n        />\n      )}\n      {isOpenIncomeLayer && (\n        <IncomeLayer\n          activeDateFilter={activeDateFilter}\n          currentTripInfo={currentTripInfo}\n          onSetIsOpenIncomeLayer={setIsOpenIncomeLayer}\n          currentBudgetInfo={currentBudgetInfo}\n          userId={userId}\n        />\n      )}\n    </div>\n  ));\n};\n\nexport default hot(Detail);\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".detail--27EDL{padding-bottom:155px}.detail--27EDL .btn_add--2cBCS{position:fixed;left:50%;bottom:20px;width:100px;height:30px;line-height:30px;border-radius:20px;background-color:#4dc4fa;font-size:13px;color:#fff;text-align:center;transform:translateX(-50%)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"detail\": \"detail--27EDL\",\n\t\"btn_add\": \"btn_add--2cBCS\"\n};"],"sourceRoot":""}